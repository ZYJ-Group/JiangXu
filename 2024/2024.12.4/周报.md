# 周报

 1. 结合师兄的毕业论文跑通CGAN代码，记录学习笔记收悉代码。

## 生成模型
从训练数据中估计总体的概率分布，然后从概率分布中抽样出新的样本
![输入图片说明](/2024/2024.12.4/img/1.png)
## 判别网络
 - 对判别网络而言 真实照片判别的概率越大越好，取max
 - 而生成的照片经判别的概率越小越好（提升生成质量），取min
 - 优化函数 求这二者的最大值
 ![输入图片说明](/2024/2024.12.4/img/2.png)
 
 - 对于所有的样本而言就是均值最大
 ![输入图片说明](/2024/2024.12.4/img/3.png)
 
 - 使用对数函数再取均值
![输入图片说明](/2024/2024.12.4/img/4.png)
 - 最终的判别网络的优化函数![输入图片说明](/2024/2024.12.4/img/5.png)

>   判别器可以被视为一个二分类器，其输出 D(x)是样本来自真实数据的概率。

>   损失函数 −logD(x) 或−log(1−D(x)) 是对数似然函数，直接度量了预测的可信度。

> 对数函数 log⁡(x) 是在 x>0 上连续且单调递增的函数。其梯度（即导数）为：
> -   当 x接近 0 时，梯度值 1\x会变得非常大，表明对于低概率事件（预测值较差）的惩罚非常强。
> -   当 x接近 1 时，梯度值变得较小，更新幅度自然减弱。

> 这种性质使得对数损失函数在整个定义域上产生的梯度是连续且光滑变化的，不会像某些非连续函数（如阶跃函数）那样产生突变，从而更适合用于优化。
## 生成网络

 1. 生成网络的优化函数==取最小值`min`== 越小则生成的越不真上升空间大
![输入图片说明](/2024/2024.12.4/img/6.png)
## 训练GAN的步骤
 1.把真实的照片和伪造的照片喂给判别网络D，先优化判别网络
 2.再去优化生成网络G，不断地迭代，最终收敛
 

# CycleGAN

 1. 两份风格不同的数据集（不需要一一对应），用以相互转换
 2. 构造两个生成网络和判别网络，用于两种风格的相互转换；生成网络`G`和`F`，判别网络`Dx`和`Dy`


## 两种风格转换流程

1. 先冬天判别器判别冬天，再用夏天的图生成冬天的图用冬天的判别器判别

![输入图片说明](/2024/2024.12.4/img/7.png)
2. 先夏天判别器判别夏天，再用冬天的图生成夏天的图用夏天的判别器判别
![输入图片说明](/2024/2024.12.4/img/8.png)

> 每次的判别器都是目的风格判别器，现实目的风格图判别，再不同风格转换成目的风格图，经目的风格判别器判别

 -两种转换的损失函数
 ![输入图片说明](/2024/2024.12.4/img/9.png)
## 循环一致损失函数
***确保转换后的图像再转换回来结构信息相似***
 - x和xhat一致；y和yhat一致
![输入图片说明](/2024/2024.12.4/img/10.png)
 - `F(G（x）)是x转换两次后的图也就是Xhat，想要和x很相似，用范数`同理Y

![输入图片说明](/2024/2024.12.4/img/11.png)


## 最终损失函数

> 把单独的两种风格转换的损失函数和循环一致损失函数加起来就是最终的损失函数了

![输入图片说明](/2024/2024.12.4/img/12.png)
## 鉴别损失函数

 - 防止整体色彩的变化

![输入图片说明](/2024/2024.12.4/img/13.png)
## CGAN
![输入图片说明](/2024/2024.12.4/img/14.png)

 - CGAN网络模块的代码流程示意图
 - 实验结果
 ![输入图片说明](/2024/2024.12.4/img/15.png)
![输入图片说明](/2024/2024.12.4/img/16.png)
