# 结合SAM的无监督图像质量评估

## 技术路线：

 1. 采用facebook优化的moco对比学习框架，使用resnet50提取图像特征
 2. 使用sam模型分割图像，计算分割对象完整性、边界精度以及掩码覆盖率，加权打分作为标签
 3. 冻结训练好的对比学习模型，使用elatic线性模型把提取的特征映射到图像分数上
 
 ## facebook优化方法 （泛化性强）
 ![输入图片说明](/2025/2025.9.18/img/1.bmp)
 
 4. **对比学习：** 使得相同的图像的输出向量的差异化小，而不太相同的图像输出向量差异化大；

 5. **过程：** 一张图像做两种不同的数据扰动变化，叫做正样本对，所以这张图片由模型的输出和这两种扰动图像的输出分布差异化小，而与其他图像扰动版本的输出差异化大；

 6. **算法本质：** 由编码器提取的图像特征与样本空间（所有图像的各种扰动）的图像特征做查询，找出同一张图像对应的扰动版本，以此学习编码器；

 7. **传统方法局限：** 既然是做查询，那用来查询的图像特征Q和样本空间的K应该是同一个编码器提取的特征，但深度学习算法是通过损失逐步更新卷积参数的，所以导致了样本空间的特征是一直在变的，计算所有的负样本特征是非常耗时的；

 8. **解决方法：** 如果只计算样本的子集，就会导致查询的特征与有限的负样本空间拟合，没有学习到同一图像的本质特征，无法很好的泛化；所以facebook提出了参数更新算法
 
 ![输入图片说明](/2025/2025.9.18/img/2.bmp)

 

 -**解释：**  如果同步更新两个编码器参数就会导致样本空间变化大，那么上一步学习到的参数与这次学习的损失变大，导致无法收敛；约束K编码器缓慢更新，这样设计损失函数始终在一个相对一致的特征空间里优化，就更容易收敛，

